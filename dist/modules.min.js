function a2digitos(num){return num<10?"0"+String(num):String(num)}var flickr_api_key="516c801b319d21342af7881ea6471812",flickr_user_id="97546219%40N00",blogger_api_key="AIzaSyBmSolgBGsEjnkT-KF8_p1puXjAXSKhQS4",blogger_blogs=["2924552721978703143","2994125734899716427","8460214497105138981"],recaptcha_key="6LdRbDAUAAAAAFJx_5UvNWkcUT1efJ6tXS5H7DpB",config={apiKey:"AIzaSyARXtM8JStW3UmgERWH_ufd_ixPqc5qytE",authDomain:"www-olivercastelblanco-com.firebaseapp.com",databaseURL:"https://www-olivercastelblanco-com.firebaseio.com",projectId:"www-olivercastelblanco-com",storageBucket:"www-olivercastelblanco-com.appspot.com",messagingSenderId:"850614628513"},idioma=String(window.navigator.userLanguage||window.navigator.language).substr(0,2);"es"!=idioma&&"en"!=idioma&&(idioma="en"),firebase.initializeApp(config);var app=angular.module("app",["ngAnimate","ngAria","ngMaterial","ngMessages","ngRoute","ngSanitize","firebase","vcRecaptcha"]);app.config(function($mdThemingProvider){$mdThemingProvider.theme("default").primaryPalette("light-blue",{default:"600"}).accentPalette("orange",{default:"800"}).warnPalette("deep-orange").backgroundPalette("grey"),$mdThemingProvider.theme("dark-grey").backgroundPalette("grey").dark(),$mdThemingProvider.theme("dark-orange").backgroundPalette("orange").dark(),$mdThemingProvider.theme("dark-blue").backgroundPalette("light-blue").dark()}),app.controller("main",["$http",function($http){console.log("main")}]),app.controller("contenido",["$rootScope","$http","apiFlickr","$window","$firebaseObject","$mdMenu","$timeout","$scope",function($rootScope,$http,apiFlickr,$window,$firebaseObject,$mdMenu,$timeout,$scope){function cargaEstiloBgHeader(){for(var numImagen=Math.floor(Math.random()*rutasBgHeaders.length),imagen=rutasBgHeaders[numImagen],_estiloBgHeader={},i=0;i<imagen.size.length;i++){var ruta=imagen.size[i];switch(ruta.label){case"Large":_estiloBgHeader.sm={"background-image":"url('"+ruta.source+"')"};break;case"Large 1600":_estiloBgHeader.md={"background-image":"url('"+ruta.source+"')"};break;case"Large 2048":_estiloBgHeader.lg={"background-image":"url('"+ruta.source+"')"};break;case"Original":_estiloBgHeader.xl={"background-image":"url('"+ruta.source+"')"}}}var ancho=$window.innerWidth;ancho>600&&ancho<960?raiz.estiloBgHeader=_estiloBgHeader.sm:ancho>=960&&ancho<1280?raiz.estiloBgHeader=_estiloBgHeader.md:ancho>=1280&&ancho<1920?raiz.estiloBgHeader=_estiloBgHeader.lg:ancho>=1920&&(raiz.estiloBgHeader=_estiloBgHeader.xl)}function obtieneNombreClase(entrada){for(var salida="",i=0;i<entrada.length;i++)entrada.charCodeAt(i)<97?salida+="-"+String.fromCharCode(entrada.charCodeAt(i)+32):salida+=entrada.substr(i,1);return salida}console.log("contenido");var fondo,html,fondoOpacity,htmlScrollTop,raiz=this,refInterfaz=firebase.database().ref("interfaz"),refBgHeader=firebase.database().ref("bgHeader"),bgHeader=$firebaseObject(refBgHeader);raiz.interfaz=$firebaseObject(refInterfaz),raiz.interfaz.$loaded().then(function(resp){raiz.idioma=idioma,raiz.cambiaIdioma=function(id){raiz.idioma=id,idioma=id,$rootScope.$broadcast("cambiaIdioma",idioma)},$scope.$on("$mdMenuClose",function(){$timeout(function(){html.scrollTop=htmlScrollTop})}),raiz.rutaHeader="views/navbar.html",raiz.rutaBody="views/portfolio.html",raiz.claseContenido="portfolio",raiz.rutaFooter="views/footer.html",raiz.rutaLogoPreloader="views/logoAnimado.html",raiz.cargado=!1,raiz.claseContenido=obtieneNombreClase(raiz.claseContenido),raiz.openMenu=function($mdMenu,ev){fondo=angular.element(document.getElementById("fondo-navbar"))[0],html=angular.element(document.getElementsByTagName("html"))[0],fondoOpacity=fondo.style.opacity,htmlScrollTop=html.scrollTop,$mdMenu.open(ev),$timeout(function(){fondo.style.opacity=fondoOpacity})}}).catch(function(error){console.log("error",error)}),$rootScope.$on("finPrecarga",function(e,a){raiz.cargado=!0}),raiz.ir=function(destino){raiz.rutaBody="views/"+destino+".html",raiz.claseContenido=obtieneNombreClase(destino)};var rutasBgHeaders=[];bgHeader.$loaded().then(function(resp){angular.forEach(bgHeader,function(valor,llave){apiFlickr.bgHeader(valor).then(function(resp){resp?(rutasBgHeaders.push(resp.sizes),rutasBgHeaders.length==Object.keys(bgHeader).length-4&&cargaEstiloBgHeader()):raiz.estiloBgHeader={"background-image":"url('https://firebasestorage.googleapis.com/v0/b/www-olivercastelblanco-com.appspot.com/o/assets%2Fimg%2Fbg-header.jpg?alt=media&token=4933e065-14dc-438a-a481-23b1a5867937')"}})})}).catch(function(error){console.log("error",error)})}]),app.controller("animaLogo",["$scope","$timeout","$rootScope",function($scope,$timeout,$rootScope){console.log("animaLogo");var raiz=this;angular.element(document.querySelector(".dummy")).one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(e){raiz.paso1=!0,$scope.$apply(),$timeout(function(){raiz.paso2=!0,$scope.$apply(),$timeout(function(){raiz.paso3=!0,$scope.$apply(),$rootScope.$emit("finPrecarga")},1950)},2e3)})}]),app.controller("encabezado",[function(){console.log("encabezado"),this.selectedTab="pagina1"}]),app.controller("portfolio",["$http","$scope","$firebaseStorage","$rootScope","$mdDialog","$firebaseArray","$firebaseObject","$timeout",function($http,$scope,$firebaseStorage,$rootScope,$mdDialog,$firebaseArray,$firebaseObject,$timeout){function ProyectoController($scope,$mdDialog,locals){$scope.elemento=locals.elemento,$scope.idioma=locals.idioma,$scope.dialog=locals.dialog,fondo=angular.element(document.getElementById("fondo-navbar"))[0],html=angular.element(document.getElementsByTagName("html"))[0],fondoOpacity=fondo.style.opacity,htmlScrollTop=html.scrollTop,$scope.cancel=function(){$mdDialog.hide(),$timeout(function(){html.scrollTop=htmlScrollTop})}}console.log("portfolio");var fondo,html,fondoOpacity,htmlScrollTop,raiz=this;raiz.idioma=idioma;var ref=firebase.storage().ref("assets/projects/"),refe=firebase.database().ref(),portfolioRef=refe.child("portfolio"),lista=$firebaseArray(portfolioRef),portfolioRef=firebase.database().ref("contenido/portfolio"),portfolio=$firebaseObject(portfolioRef),elementos={};portfolio.$loaded().then(function(resp){raiz.portfolio=portfolio}).catch(function(error){console.log("error",error)}),lista.$loaded().then(function(resp){$scope.fichas=[],angular.forEach(resp,function(valor,llave){$firebaseStorage(ref.child(valor.ruta+"/card-image.jpg")).$getDownloadURL().then(function(url){valor.cardImage=url,$scope.fichas[llave]=valor}).catch(function(error){$scope.fichas[llave]=valor}),valor.tabs&&angular.forEach(valor.tabs,function(cont,id){angular.forEach(cont.elementos,function(value,key){$firebaseStorage(ref.child(valor.ruta+"/"+value.nombre)).$getDownloadURL().then(function(url){valor.tabs[id].elementos[key].ruta=url}).catch(function(error){console.log("error",error)})})}),elementos[valor.ruta]=valor})}).catch(function(error){console.log("error",error)}),$rootScope.$on("abreFichaProyecto",function(ev,ruta){$mdDialog.show({controller:ProyectoController,templateUrl:"views/projDialog.tmpl.html",parent:angular.element(document.body),targetEvent:ev,clickOutsideToClose:!0,fullscreen:!0,locals:{elemento:elementos[ruta],idioma:raiz.idioma,dialog:portfolio.dialog},bindToController:!0,onComplete:function(scope,element){fondo.style.opacity=fondoOpacity},onRemoving:function(scope,element){html.scrollTop=htmlScrollTop},onShowing:function(scope,element){$timeout(function(){fondo.style.opacity=fondoOpacity})}}).then(function(){console.log("Dialog hide")},function(){console.log("Dialog close")})})}]),app.controller("photos",["apiFlickr","$timeout","$window",function(apiFlickr,$timeout,$window){console.log("photos");var raiz=this;raiz.fadeOut={},raiz.aToolbar={},raiz.modoAlbum=!1,raiz.modoFoto=!1,raiz.abreAlbum=function(album_id,album_titulo){raiz.aToolbar[album_id]=!0,raiz.nombreAlbum=album_titulo,raiz.modoAlbum=!0,angular.forEach(raiz.albumes,function(valor,llave){valor.id!=album_id&&(raiz.fadeOut[valor.id]=!0)}),raiz.fotosAlbumes(album_id)},raiz.abreFoto=function(foto_id,foto_titulo){raiz.modoFoto=!0,raiz.modoAlbum=!0,raiz.foto={},raiz.foto.titulo=foto_titulo,angular.forEach(raiz.fotos,function(valor,llave){valor.id==foto_id&&(raiz.foto.titulo=valor.titulo,$window.innerWidth>1024?(raiz.foto.url=valor.original_url,raiz.foto.width=valor.original_width,raiz.foto.height=valor.original_height):(raiz.foto.url=valor.large_url,raiz.foto.width=valor.large_width,raiz.foto.height=valor.large_height))});var anchoContent=angular.element(document.querySelector("#photos .content"));anchoContent=anchoContent[0].clientWidth;var altoToolbar=angular.element(document.querySelector("#photos .content .barra"));altoToolbar=altoToolbar[0].clientHeight;var padding=angular.element(document.querySelector("#photos .content .lista.albumes"));padding=padding[0].offsetHeight,raiz.altoFoto=String(Math.ceil(anchoContent/raiz.foto.width*raiz.foto.height)+altoToolbar+2*padding)+"px"},raiz.cierraFoto=function(){raiz.modoAlbum=!0,raiz.modoFoto=!1,raiz.foto=null,raiz.altoFoto=null},raiz.fotosAlbumes=function(album_id){apiFlickr.listaFotos(album_id).then(function(resp){var listaFotos=resp.photoset.photo;raiz.fotos=[];for(var i=0;i<listaFotos.length;i++)raiz.fotos[i]={},raiz.fotos[i].id=listaFotos[i].id,raiz.fotos[i].titulo=listaFotos[i].title,apiFlickr.foto(raiz.fotos[i].id,String(i)).then(function(resp){for(var num=Number(resp[1]),fotos=resp[0].sizes.size,g=0;g<fotos.length;g++){var label=fotos[g].label;if("Medium 640"==label){raiz.fotos[num].small_url=fotos[g].source;var relacion=fotos[g].width/fotos[g].height;raiz.fotos[num].relacion=relacion,relacion<=.3?(raiz.fotos[num].colspan=1,raiz.fotos[num].rowspan=3):relacion>.3&&relacion<=.7?(raiz.fotos[num].colspan=1,raiz.fotos[num].rowspan=2):relacion>.7&&relacion<=1.5?(raiz.fotos[num].colspan=1,raiz.fotos[num].rowspan=1):relacion>1.5&&relacion<3?(raiz.fotos[num].colspan=2,raiz.fotos[num].rowspan=1):relacion>=3&&(raiz.fotos[num].colspan=3,raiz.fotos[num].rowspan=1)}else"Large"==label?(raiz.fotos[num].large_url=fotos[g].source,raiz.fotos[num].large_width=fotos[g].width,raiz.fotos[num].large_height=fotos[g].height):"Original"==label&&(raiz.fotos[num].original_url=fotos[g].source,raiz.fotos[num].original_width=fotos[g].width,raiz.fotos[num].original_height=fotos[g].height)}})})},raiz.volverAlbumes=function(){raiz.fotos=null,raiz.nombreAlbum=null,raiz.modoAlbum=!1,raiz.modoFoto=!1,raiz.foto=null,raiz.altoFoto=null,angular.forEach(raiz.albumes,function(valor,llave){raiz.fadeOut[valor.id]=!1,raiz.aToolbar[valor.id]=!1})},raiz.albumes=[],apiFlickr.albumes().then(function(resp){for(var albumes=resp.photosets.photoset,i=0;i<albumes.length;i++){raiz.albumes[i]={},raiz.albumes[i].titulo=albumes[i].title._content,raiz.albumes[i].id=albumes[i].id,raiz.fadeOut[albumes[i].id]=!1,raiz.aToolbar[albumes[i].id]=!1;var portada=albumes[i].primary;apiFlickr.foto(portada,String(i)).then(function(resp){for(var num=Number(resp[1]),fotos=resp[0].sizes.size,g=0;g<fotos.length;g++){"Medium 640"==fotos[g].label&&(raiz.albumes[num].portada_url=fotos[g].source)}})}})}]),app.controller("blogs",["apiBlogger","$timeout","$scope","$sce",function(apiBlogger,$timeout,$scope,$sce){console.log("blogs");var raiz=this;raiz.modoEntradas=!1,raiz.modoPost=!1,raiz.blogs=[];for(var i=0;i<blogger_blogs.length;i++)apiBlogger.blogs(blogger_blogs[i],String(i)).then(function(data){var resp=data[0],num=Number(data[1]);raiz.blogs[num]={},raiz.blogs[num].id=resp.id,raiz.blogs[num].titulo=resp.name,raiz.blogs[num].descripcion=resp.description,raiz.blogs[num].numPosts=resp.posts.totalItems});raiz.abrirBlog=function(index){raiz.blogBinario=!1,"2994125734899716427"==raiz.blogs[index].id&&(raiz.blogBinario=!0),raiz.nombreBlog=raiz.blogs[index].titulo,raiz.modoEntradas=!0,raiz.modoPost=!1,$scope.entradas=[],apiBlogger.entradas(raiz.blogs[index].id,raiz.blogs[index].numPosts).then(function(data){angular.forEach(data.items,function(valor,llave){var url,tipo,rand;url=valor.content.match(/<iframe[\w\W]+data-thumbnail-src="(https?:\/\/[a-zA-Z0-9.\/_+]*)"/g),url?(rand=Math.floor(Math.random()*url.length),url=url[rand].replace(/<iframe[\w\W]+data-thumbnail-src="(https?:\/\/[a-zA-Z0-9.\/_+]*)"/g,"$1"),tipo="video"):(url=valor.content.match(/<img[^>]+src="(https?:\/\/[a-zA-Z0-9.\/_+]*)"/g),url?(rand=Math.floor(Math.random()*url.length),url=url[rand].replace(/<img[^>]+src="(https?:\/\/[a-zA-Z0-9.\/_+]*)"/g,"$1"),tipo="imagen"):(url="",tipo=""));var conVideo=valor.content.replace(/<iframe[^>]+(height|width)="([0-9]+)"[^>]+(height|width)="([0-9]+)"[^>]*>/g,function(match,p1,p2,p3,p4){var alto,ancho,medida1,medida2,k,altoMax,anchoMax=angular.element(angular.element(document.getElementsByClassName("cuerpo")[0]).children()[0]).children()[0].clientWidth-32;return"width"==p1?(ancho=Number(p2),alto=Number(p4),k=alto/ancho,altoMax=anchoMax*k,medida1='width="'+anchoMax+'"',medida2='height="'+altoMax+'"'):(ancho=Number(p4),alto=Number(p2),k=alto/ancho,altoMax=anchoMax*k,medida1='height="'+altoMax+'"',medida2='width="'+anchoMax+'"'),match.replace(/(<iframe[^>]+)((height|width)="[0-9]+")([^>]+)((height|width)="[0-9]+")([^>]*>)/g,"$1"+medida1+"$4"+medida2+"$7")});$scope.entradas.push({id:valor.id,titulo:valor.title,contenido:conVideo,labels:valor.labels,media:{url:url,tipo:tipo}}),angular.forEach(valor.labels,function(value,key){"Oliver Castelblanco"!=value&&"Isabel Aparici"!=value||($scope.entradas[llave].autor=value)})})})},raiz.volverBlogs=function(){raiz.modoEntradas=!1,raiz.modoPost=!1},raiz.abrePost=function(index){raiz.modoEntradas=!0,raiz.modoPost=!0,raiz.entrada=$scope.entradas[index];var pos="right";raiz.entrada.contenido=raiz.entrada.contenido.replace(/<a[^>]+>(<img[^>]+)(>)[^>]+>/g,function(match,p1,p2){return pos="right"==pos?"left":"right",p1+' class="'+pos+'" '+p2}),raiz.entrada.contenido=$sce.trustAsHtml(raiz.entrada.contenido)},raiz.volverPost=function(){raiz.modoEntradas=!0,raiz.modoPost=!1}}]),app.controller("contactme",["$firebaseArray","$rootScope",function($firebaseArray,$rootScope){console.log("contactMe");var raiz=this;raiz.recaptcha_key=recaptcha_key;var ref=firebase.database().ref("mensajes"),obj=$firebaseArray(ref);raiz.enviado=!1,raiz.gracias=!1,raiz.enviar=function(msg){var hoy=new Date;msg.date=hoy.getFullYear()+"-"+a2digitos(hoy.getMonth()+1)+"-"+hoy.getDate()+" "+hoy.toLocaleTimeString("es-CO"),msg.recaptcha=null,obj.$add(msg),raiz.enviado=!0,$rootScope.$on("finPrecarga",function(e,a){raiz.gracias=!0})}}]),app.directive("scrollAbajo",["$document","$timeout",function($document,$timeout){return{restrict:"A",link:function(scope,element,attrs){var margen=window.getComputedStyle(element[0],null).getPropertyValue("margin-top");margen=parseInt(margen,10);var margenNegativa=window.getComputedStyle(element[0].children[0],null).getPropertyValue("margin-top");margenNegativa=parseInt(margenNegativa,10);var alturaBarra,top,margenInf,margenSup,navbar,fondoNavbar,opacidad,fondoHeader,html;$timeout(function(){navbar=angular.element(document.getElementById("navbar"))[0],fondoNavbar=navbar.children[0],opacidad=parseInt(window.getComputedStyle(fondoNavbar,null).getPropertyValue("opacity"),10),alturaBarra=navbar.clientHeight,top=margen-alturaBarra+margenNegativa,margenInf=top+margenNegativa,margenSup=margen+margenNegativa,fondoHeader=angular.element(document.getElementsByClassName("fondo-header"))[0],html=document.getElementsByTagName("html")[0]},100),$document.on("scroll",function(){var opacidadActual=1-(margenSup-margenInf-(html.scrollTop-margenInf))/(margenSup-margenInf),opacidadImagen=1;opacidadActual>1?(opacidadActual=1,opacidadImagen=0):opacidadActual<0&&(opacidadActual=0),window.innerWidth>959&&(0==opacidad&&angular.element(fondoNavbar).css("opacity",opacidadActual),angular.element(navbar).css("box-shadow","0px 0px 1px 0px rgba(0,0,0,"+opacidadActual+")"),angular.element(fondoHeader).css("opacity",opacidadImagen))})}}}]),app.directive("ocColumnas",["$window","$rootScope","$firebaseObject",function($window,$rootScope,$firebaseObject){return{restrict:"E",scope:{colXs:"=ocColXs",colSm:"=ocColSm",colLg:"=ocColLg",fuente:"=ocFuente",open:"&",callback:"&"},templateUrl:function(element,attrs){return"views/"+attrs.ocTemplate+".tmpl.html"},link:function(scope,element,attrs){function calculaCol(){var columnas;columnas=window.innerWidth<600?scope.colXs:window.innerWidth<959?scope.colSm:scope.colLg,scope.flex=Math.floor(100/columnas),scope.col=[];for(var i=0;i<columnas;i++)scope.col[i]=i}var ref=firebase.database().ref("contenido/portfolio/ficha");scope.interfaz=$firebaseObject(ref),calculaCol(),angular.element($window).bind("resize",function(){calculaCol(),scope.$digest()}),scope.idioma=idioma,$rootScope.$on("cambiaIdioma",function(e,a){scope.idioma=idioma}),scope.open=function(txt){$rootScope.$emit("abreFichaProyecto",txt)}}}}]),app.directive("ocBordeInferior",["$document","$window",function($document,$window){return{restrict:"A",link:function(scope,element,attrs){function calculaDim(){altoNavbar=document.getElementById("navbar").clientHeight,anchoEl=contenedor.clientWidth,altoEl=window.innerHeight-altoNavbar;var maxAncho=1.5*altoEl,size=maxAncho/anchoEl*100,pos=100-size/2-size/50+50;anchoEl<maxAncho?(angular.element(el).css("background-size",String(size)+"%"),angular.element(el).css("background-position-x",String(pos)+"%")):(angular.element(el).css("background-size","130%"),angular.element(el).css("background-position-x","80%")),window.innerWidth>599&&window.innerWidth<960?angular.element(el).css("background-image","url('https://firebasestorage.googleapis.com/v0/b/www-olivercastelblanco-com.appspot.com/o/assets%2Fimg%2FbgBinario_sm.jpg?alt=media&token=9dda553d-7875-4838-9f2d-9d8a89a311c4')"):window.innerWidth>959&&window.innerWidth<1920?angular.element(el).css("background-image","url('https://firebasestorage.googleapis.com/v0/b/www-olivercastelblanco-com.appspot.com/o/assets%2Fimg%2FbgBinario_md.jpg?alt=media&token=7e074692-ff81-4737-b523-9db25297ea62')"):window.innerWidth>1919&&angular.element(el).css("background-image","url('https://firebasestorage.googleapis.com/v0/b/www-olivercastelblanco-com.appspot.com/o/assets%2Fimg%2FbgBinario_lg.jpg?alt=media&token=a6419e39-7e85-44af-8959-f0a1f70d584b')"),angular.element(el).css("height",String(altoEl)+"px"),angular.element(el).css("width",String(anchoEl)+"px")}var anchoEl,altoEl,altoNavbar,el=element[0],contenedor=el.parentElement;calculaDim(),$document.bind("scroll",function(){contenedor.getBoundingClientRect().top>altoNavbar?(angular.element(el).css("position","absolute"),angular.element(el).css("top","")):(angular.element(el).css("position","fixed"),angular.element(el).css("top",altoNavbar+"px"))}),angular.element($window).bind("resize",function(){calculaDim(),scope.$digest()})}}}]),app.directive("ocCarousel",["$window","$rootScope",function($window,$rootScope){return{restrict:"E",scope:{fuente:"=ocFuente",izq:"&",der:"&"},templateUrl:function(element,attrs){return"views/carousel.tmpl.html"},link:function(scope,element,attrs){var total=scope.fuente.tab.elementos.length;scope.izq=function(){0==scope.visible&&(scope.visible=total),scope.visible--},scope.der=function(){++scope.visible==total&&(scope.visible=0)}}}}]),app.service("apiFlickr",["$http",function($http){return{bgHeader:function(valor){return $http.get("https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key="+flickr_api_key+"&photo_id="+valor+"&format=json&nojsoncallback=1").then(function(resp){return resp.data},function(resp){return resp.data})},albumes:function(){return $http.get("https://api.flickr.com/services/rest/?method=flickr.photosets.getList&api_key="+flickr_api_key+"&user_id="+flickr_user_id+"&format=json&nojsoncallback=1").then(function(resp){return resp.data},function(resp){return resp.data})},foto:function(foto_id,num){return $http.get("https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key="+flickr_api_key+"&photo_id="+foto_id+"&format=json&nojsoncallback=1").then(function(resp){return num?[resp.data,num]:resp.data},function(resp){return resp.data})},listaFotos:function(album_id){return $http.get("https://api.flickr.com/services/rest/?method=flickr.photosets.getPhotos&api_key="+flickr_api_key+"&photoset_id="+album_id+"&user_id="+flickr_user_id+"&format=json&nojsoncallback=1").then(function(resp){return resp.data},function(resp){return resp.data})}}}]),app.service("apiBlogger",["$http",function($http){return{blogs:function(blog_id,num){return $http.get("https://www.googleapis.com/blogger/v3/blogs/"+blog_id+"?key="+blogger_api_key).then(function(resp){return num?[resp.data,num]:resp.data})},entradas:function(blog_id,numPosts){return $http.get("https://www.googleapis.com/blogger/v3/blogs/"+blog_id+"/posts?key="+blogger_api_key+"&fields=items(id,title,content,labels)&maxResults="+numPosts).then(function(resp){return resp.data})}}}]),app.filter("simpleTexto",function(){return function(texto){return texto?String(texto).replace(/<[^>]+>/gm,"").substr(0,120)+"...":""}}),Object.keys||(Object.keys=function(){"use strict";var hasOwnProperty=Object.prototype.hasOwnProperty,hasDontEnumBug=!{toString:null}.propertyIsEnumerable("toString"),dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length;return function(obj){if("function"!=typeof obj&&("object"!=typeof obj||null===obj))throw new TypeError("Object.keys called on non-object");var prop,i,result=[];for(prop in obj)hasOwnProperty.call(obj,prop)&&result.push(prop);if(hasDontEnumBug)for(i=0;i<dontEnumsLength;i++)hasOwnProperty.call(obj,dontEnums[i])&&result.push(dontEnums[i]);return result}}());